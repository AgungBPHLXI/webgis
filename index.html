<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WebGIS PBPH Kalimantan Selatan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html, body {
    margin:0;
    padding:0;
    height:100%;
    font-family: Arial, sans-serif;
}

#map {
    height:100%;
    width:100%;
}
</style>
</head>

<body>

<div id="map"></div>

<script>

function initMap() {

    const map = new google.maps.Map(document.getElementById("map"), {
        zoom:7,
        center:{lat:-3.3167, lng:114.5900},
        mapTypeId:'terrain'
    });

    // Load GeoJSON
    map.data.loadGeoJson('pbph.geojson');

    // Style polygon
    map.data.setStyle({
        fillColor:'#ff9800',
        strokeColor:'#e65100',
        strokeWeight:2,
        fillOpacity:0.5
    });

    const infoWindow = new google.maps.InfoWindow();

    // Klik polygon
    map.data.addListener('click', function(event){

        const nama = event.feature.getProperty('NAMOBJ');
        const luas = event.feature.getProperty('LUAS');
        const status = event.feature.getProperty('STAT_IZIN');
        const no_sk = event.feature.getProperty('NO_SK');
        const jenis = event.feature.getProperty('JENIS');

        infoWindow.setContent(`
            <div style="min-width:220px">
            <b>${nama}</b><br><br>
            Status: ${status}<br>
            Jenis: ${jenis}<br>
            No SK: ${no_sk}<br>
            Luas: ${Number(luas).toLocaleString()} Ha
            </div>
        `);

        infoWindow.setPosition(event.latLng);
        infoWindow.open(map);

        // Zoom ke polygon
        const bounds = new google.maps.LatLngBounds();
        event.feature.getGeometry().forEachLatLng(function(latlng){
            bounds.extend(latlng);
        });
        map.fitBounds(bounds);
    });

}

</script>

<!-- GANTI API KEY DI BAWAH INI -->
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyApN8xPjCe-LWS2w9UQ06mb0-DvFA0OSxw&callback=initMap">
</script>

</body>
</html>
